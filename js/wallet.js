webpackJsonp([5],{fkQB:function(t,e){},izc3:function(t,e){},nfWN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("EuXz");var s={name:"wallet",data:function(){return{}},computed:{goldName:function(){var t=this.$store.state.CONFIG.site;t=void 0===t?{}:t;var e=t.gold_name;e=void 0===e?{}:e;var a=e.name,s=void 0===a?"金币":a;return s},user:function(){return this.$store.state.CURRENTUSER},wallet:function(){return this.user.wallet||{}},balance:function(){return(+this.wallet.balance||0).toFixed(2)}}},l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-wallet wallet"},[a("header",{staticClass:"m-box m-head-top"},[a("div",{staticClass:"m-box m-flex-grow1 m-flex-base0 m-aln-center"},[a("svg",{staticClass:"m-style-svg m-svg-def",on:{click:t.goBack}},[a("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-back"}})])]),t._m(0),a("div",{staticClass:"m-box m-flex-grow1 m-flex-base0 m-aln-center m-justify-end"},[a("router-link",{attrs:{slot:"append",to:{path:"detail"},append:""},slot:"append"},[t._v("明细")])],1)]),a("section",{staticClass:"m-wallet-panel"},[a("h3",[t._v("账户余额(元)")]),a("p",[t._v(t._s(t.balance))])]),a("ul",{staticClass:"m-box-model m-entry-group padding"},[a("router-link",{staticClass:"m-entry",attrs:{to:{path:"recharge"},append:"",tag:"li"}},[a("svg",{staticClass:"m-style-svg m-svg-def m-entry-prepend"},[a("use",{attrs:{"xlink:href":"#wallet-recharge"}})]),a("span",{staticClass:"m-text-box m-flex-grow1"},[t._v("充值")]),a("svg",{staticClass:"m-style-svg m-svg-def m-entry-append"},[a("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-arrow-r"}})])]),a("router-link",{staticClass:"m-entry",attrs:{to:{path:"withdraw"},append:"",tag:"li"}},[a("svg",{staticClass:"m-style-svg m-svg-def m-entry-prepend"},[a("use",{attrs:{"xlink:href":"#wallet-withdraw"}})]),a("span",{staticClass:"m-text-box m-flex-grow1"},[t._v("提现")]),a("svg",{staticClass:"m-style-svg m-svg-def m-entry-append"},[a("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-arrow-r"}})])])],1)])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-box m-flex-grow1 m-flex-base0 m-aln-center m-justify-center"},[a("h2",[t._v("钱包")])])}],i=a("XyMi");function o(t){a("wBpf")}var r=!1,c=o,m=null,d=null,u=Object(i["a"])(s,l,n,r,c,m,d);e["default"]=u.exports},sa01:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("rzQm"),l=a.n(s),n={name:"WalletInfoDetail",props:["detail"],computed:{user:function(){return this.$store.state.CURRENTUSER}}},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wallet-info--detail"},[a("div",{staticClass:"wallet-info--detail--head"},[t._v("账单详情")]),a("div",{staticClass:"wallet-info--detail--body"},[a("p",[t._v("交易"+t._s(t.detail.status?"成功":"失败"))]),a("h2",[t._v(t._s(t.detail.action?"+":"-")+t._s(t.detail.amount.toFixed(2)))])]),a("div",{staticClass:"wallet-info--detail--content"},[a("div",{staticClass:"wallet-info--detail--content-row"},[a("span",{staticClass:"wallet-info--detail--content-row--label"},[t._v(t._s(t.detail.action?"收":"付")+"款人")]),a("div",[a("v-avatar",{attrs:{sex:t.user.sex,src:t.user.avatar,size:"small"}}),t._v(" "+t._s(t.user.name))],1)]),a("div",{staticClass:"wallet-info--detail--content-row"},[a("span",{staticClass:"wallet-info--detail--content-row--label m-flex-shrink0"},[t._v("交易说明")]),a("div",[t._v(t._s(t.detail.body))])]),a("div",{staticClass:"wallet-info--detail--content-row"},[a("span",{staticClass:"wallet-info--detail--content-row--label"},[t._v("交易时间")]),a("div",[t._v(t._s(t.detail.created_at))])])])])},o=[],r=a("XyMi");function c(t){a("izc3")}var m=!1,d=c,u=null,f=null,v=Object(r["a"])(n,i,o,m,d,u,f),p=v.exports,w=(a("VjuZ"),a("smQ+"),["周日","周一","周二","周三","周四","周五","周六"]);function h(t){t=t||new Date;var e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate(),l=w[t.getDay()],n=(t.getHours()+"").padStart(2,0),i=(t.getMinutes()+"").padStart(2,0);return{Y:e,M:a,D:s,w:l,d:(a+"").padStart(2,0)+"/"+(s+"").padStart(2,0),t:n+":"+i}}var x={name:"WalletDetailItem",props:{detail:{required:!0}},data:function(){return{}},computed:{created_at:function(){var t,e=h(new Date),a=h(new Date(this.detail.created_at.replace(/-/g,"/")));return a.Y<e.Y?t=a.d:a.M<e.M?t=a.d:e.D-a.D>1?t=a.w:e.D-a.D===1?t="昨天":e.D-a.D===0&&(t="今天"),"<p>".concat(t,"</p><p>").concat(a.t,"</p>")}},methods:{showDetail:function(){this.$emit("on-click")}}},b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-box m-bb1 m-aln-center m-justify-bet m-main m-wallet-detail",on:{click:function(e){return e.stopPropagation(),t.showDetail(e)}}},[a("div",{staticClass:"m-wallet-detail-time",domProps:{innerHTML:t._s(t.created_at)}}),a("div",{staticClass:"m-wallet-detail-title"},[t._v(t._s(t.detail.subject))]),a("div",{staticClass:"m-wallet-detail-amount"},[t._v("\n    "+t._s(t.detail.action?"+":"-")+t._s(t.detail.amount.toFixed(2))+"\n  ")])])},g=[];function _(t){a("tjAA")}var C=!1,y=_,k=null,j=null,D=Object(r["a"])(x,b,g,C,y,k,j),E=D.exports,$={name:"WalletDetail",components:{walletInfo:p,walletDetailItem:E},data:function(){return{options:[{value:"all",label:"全部"},{value:"expenses",label:"支出"},{value:"income",label:"收入"}],currAction:"",list:[],currInfo:null,show:!1}},watch:{currAction:function(){this.list=[],this.$refs.loadmore.beforeRefresh()},show:function(t){t?(this.scrollTop=document.scrollingElement.scrollTop,document.body.classList.add("m-pop-open"),document.body.style.top=-this.scrollTop+"px"):(document.body.style.top="",document.body.classList.remove("m-pop-open"),document.scrollingElement.scrollTop=this.scrollTop)}},computed:{after:function(){var t=this.list.length;return t?this.list[t-1].id:0}},methods:{showDetail:function(t){this.currInfo=t,this.show=!0},onRefresh:function(){var t=this;this.$http.get("/wallet/charges",{params:{action:this.currAction,limit:15}}).then(function(e){var a=e.data,s=void 0===a?[]:a;s.length>0&&(t.list=t.uniqById(s,t.list)),t.$refs.loadmore.topEnd(!(s.length<15))})},onLoadMore:function(){var t=this;this.$http.get("/wallet/charges",{params:{action:this.currAction,limit:15,after:this.after}}).then(function(e){var a=e.data,s=void 0===a?[]:a;s.length>0&&(t.list=l()(t.list).concat(l()(s))),t.$refs.loadmore.bottomEnd(s.length<15)})}}},M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wallet-detail p-wallet-detail"},[a("header",{staticClass:"m-box m-head-top m-pos-f m-main m-bb1"},[a("div",{staticClass:"m-box m-aln-center m-flex-grow1 m-flex-base0"},[a("svg",{staticClass:"m-style-svg m-svg-def",on:{click:t.goBack}},[a("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-back"}})])]),a("div",{staticClass:"m-box m-aln-center m-flex-grow1 m-flex-base0 m-justify-center"},[a("diy-select",{attrs:{options:t.options,placeholder:"明细"},model:{value:t.currAction,callback:function(e){t.currAction=e},expression:"currAction"}})],1),a("div",{staticClass:"m-box m-aln-center m-flex-grow1 m-flex-base0 m-justify-end"})]),a("load-more",{ref:"loadmore",staticClass:"m-wallet-list",attrs:{onRefresh:t.onRefresh,onLoadMore:t.onLoadMore}},t._l(t.list,function(e){return e.id?a("wallet-detail-item",{key:e.id,attrs:{detail:e},on:{"on-click":function(a){t.showDetail(e)}}}):t._e()})),a("div",{on:{touchmove:function(t){t.preventDefault()}}},[a("transition",{attrs:{name:"toast"}},[t.show?a("div",{staticClass:"m-pop-box",on:{click:function(e){t.show=!1}}}):t._e()]),t.show?a("transition",{attrs:{name:"fade"}},[t.currInfo&&t.currInfo.id?a("walletInfo",{attrs:{detail:t.currInfo}}):t._e()],1):t._e()],1)],1)},I=[];function A(t){a("fkQB")}var O=!1,R=A,S=null,z=null,B=Object(r["a"])($,M,I,O,R,S,z);e["default"]=B.exports},tMln:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"wallet-recharge"},l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-box-model p-wallet-recharge m-pos-f"},[a("header",{staticClass:"m-box m-justify-bet m-aln-center m-bb1 m-head-top m-main m-lim-width"},[a("div",{staticClass:"m-box m-flex-grow1 m-aln-center m-flex-base0"},[a("svg",{staticClass:"m-style-svg m-svg-def",on:{click:t.goBack}},[a("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-back"}})])]),t._m(0),a("div",{staticClass:"m-box m-flex-grow1 m-aln-center m-flex-base0 m-justify-end"})]),t._m(1)])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-box-model m-flex-grow1 m-aln-center m-flex-base0 m-head-top-title"},[a("span",[t._v("充值")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"m-box-model m-aln-center m-justify-center m-flex-grow1 m-main m-lim-width"},[a("p",{staticStyle:{"font-size":"24px"}},[a("span",{staticClass:"rotate",staticStyle:{display:"inline-block","font-size":"28px","margin-right":"5px","vertical-align":"middle"}},[t._v("☢")]),a("span",[t._v("充值功能开发中, 敬请期待...")])])])}],i=a("XyMi"),o=!1,r=null,c=null,m=null,d=Object(i["a"])(s,l,n,o,r,c,m);e["default"]=d.exports},tjAA:function(t,e){},uVvo:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"wallet-withdraw"},l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-box-model m-pos-f p-wallet-withdraw"},[a("header",{staticClass:"m-box m-justify-bet m-aln-center m-bb1 m-head-top m-main m-lim-width"},[a("div",{staticClass:"m-box m-flex-grow1 m-aln-center m-flex-base0"},[a("svg",{staticClass:"m-style-svg m-svg-def",on:{click:t.goBack}},[a("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-back"}})])]),t._m(0),a("div",{staticClass:"m-box m-flex-grow1 m-aln-center m-flex-base0 m-justify-end"})]),t._m(1)])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-box-model m-flex-grow1 m-aln-center m-flex-base0 m-head-top-title"},[a("span",[t._v("提现")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"m-box-model m-aln-center m-justify-center m-flex-grow1 m-main m-lim-width"},[a("p",{staticStyle:{"font-size":"24px"}},[a("span",{staticClass:"rotate",staticStyle:{display:"inline-block","font-size":"28px","margin-right":"5px","vertical-align":"middle"}},[t._v("☢")]),a("span",[t._v("提现功能开发中, 敬请期待...")])])])}],i=a("XyMi"),o=!1,r=null,c=null,m=null,d=Object(i["a"])(s,l,n,o,r,c,m);e["default"]=d.exports},wBpf:function(t,e){}});
//# sourceMappingURL=wallet.js.map